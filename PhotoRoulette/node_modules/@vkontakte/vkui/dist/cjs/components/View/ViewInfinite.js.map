{"version":3,"sources":["../../../../src/components/View/ViewInfinite.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames, noop } from '@vkontakte/vkjs';\nimport { withContext } from '../../hoc/withContext';\nimport { withPlatform } from '../../hoc/withPlatform';\nimport { canUseDOM, type DOMProps, withDOM } from '../../lib/dom';\nimport { getNavId, type NavIdProps } from '../../lib/getNavId';\nimport { warnOnce } from '../../lib/warnOnce';\nimport type { HasPlatform, HTMLAttributesWithRootRef } from '../../types';\nimport { ScrollContext, type ScrollContextInterface } from '../AppRoot/ScrollContext';\nimport {\n  ConfigProviderContext,\n  type ConfigProviderContextInterface,\n} from '../ConfigProvider/ConfigProviderContext';\nimport { NavViewIdContext } from '../NavIdContext/NavIdContext';\nimport { NavTransitionProvider } from '../NavTransitionContext/NavTransitionContext';\nimport { NavTransitionDirectionProvider } from '../NavTransitionDirectionContext/NavTransitionDirectionContext';\nimport { SplitColContext, type SplitColContextProps } from '../SplitCol/SplitColContext';\nimport { type CustomTouchEvent, Touch } from '../Touch/Touch';\nimport {\n  getSwipeBackPredicates,\n  hasHorizontalScrollableElementWithScrolledToLeft,\n  swipeBackExcluded,\n} from './utils';\nimport styles from './View.module.css';\n\nconst warn = warnOnce('ViewInfinite');\n\ninterface Scrolls {\n  [index: string]: Array<number | undefined>;\n}\n\ninterface ViewsScrolls {\n  [index: string]: Scrolls;\n}\n\ntype TransitionEventHandler = (e?: TransitionEvent) => void;\n\nexport let scrollsCache: ViewsScrolls = {};\n\nexport type TransitionParams = { from: string | null; to: string | null };\n\nexport interface ViewInfiniteProps\n  extends HTMLAttributesWithRootRef<HTMLElement>,\n    HasPlatform,\n    NavIdProps {\n  activePanel: string;\n  onTransition?: (params: TransitionParams & { isBack: boolean }) => void;\n  /**\n   * callback свайпа назад\n   */\n  onSwipeBack?: () => void;\n  /**\n   * callback начала анимации свайпа назад.\n   */\n  onSwipeBackStart?: (activePanel: string | null) => void | 'prevent';\n  /**\n   * callback завершения анимации отмененного пользователем свайпа\n   */\n  onSwipeBackCancel?: () => void;\n  history?: string[];\n  isBackCheck?: (params: TransitionParams) => boolean;\n  /**\n   * @ignore\n   */\n  splitCol?: SplitColContextProps;\n  /**\n   * @ignore\n   */\n  configProvider?: ConfigProviderContextInterface;\n  /**\n   * @ignore\n   */\n  scroll?: ScrollContextInterface;\n}\n\nexport interface ViewInfiniteState {\n  animated: boolean;\n\n  visiblePanels: Array<string | null>;\n  activePanel: string | null;\n  isBack?: boolean;\n  prevPanel: string | null;\n  nextPanel: string | null;\n\n  swipingBack?: boolean;\n  swipeBackStartX: number;\n  swipeBackShift: number;\n  swipeBackNextPanel: string | null;\n  swipeBackPrevPanel: string | null;\n  swipeBackResult: 'success' | 'fail' | null;\n\n  browserSwipe: boolean;\n}\n\nclass ViewInfiniteComponent extends React.Component<\n  ViewInfiniteProps & DOMProps,\n  ViewInfiniteState\n> {\n  constructor(props: ViewInfiniteProps) {\n    super(props);\n\n    this.state = {\n      animated: false,\n\n      visiblePanels: [props.activePanel],\n      activePanel: props.activePanel,\n      isBack: undefined,\n      prevPanel: null,\n      nextPanel: null,\n\n      swipingBack: undefined,\n      swipeBackStartX: 0,\n      swipeBackShift: 0,\n      swipeBackNextPanel: null,\n      swipeBackPrevPanel: null,\n      swipeBackResult: null,\n\n      browserSwipe: false,\n    };\n  }\n\n  static defaultProps: Partial<ViewInfiniteProps> = {\n    history: [],\n  };\n\n  private swipeBackPrevented = false;\n  private scrolls = scrollsCache[getNavId(this.props, warn) as string] || {};\n  private transitionFinishTimeout: ReturnType<typeof setTimeout> | undefined = undefined;\n  private readonly animationFinishTimeout: ReturnType<typeof setTimeout> | undefined = undefined;\n\n  get document() {\n    return this.props.document;\n  }\n\n  get window() {\n    return this.props.window;\n  }\n\n  get panels() {\n    return React.Children.toArray(this.props.children) as React.ReactElement[];\n  }\n\n  panelNodes: { [id: string]: HTMLDivElement | null } = {};\n\n  componentWillUnmount() {\n    const id = getNavId(this.props);\n    if (id) {\n      scrollsCache[id] = this.scrolls;\n    }\n    if (this.animationFinishTimeout) {\n      clearTimeout(this.animationFinishTimeout);\n    }\n  }\n\n  componentDidUpdate(prevProps: ViewInfiniteProps, prevState: ViewInfiniteState) {\n    // Нужен переход\n    if (\n      prevProps.activePanel !== this.props.activePanel &&\n      !prevState.swipingBack &&\n      !prevState.browserSwipe\n    ) {\n      let isBack = false;\n\n      if (this.props.isBackCheck) {\n        isBack = this.props.isBackCheck({\n          from: prevProps.activePanel,\n          to: this.props.activePanel,\n        });\n      } else {\n        const firstLayerId = this.panels\n          .map((panel) => getNavId(panel.props, warn))\n          .find((id) => id === prevProps.activePanel || id === this.props.activePanel);\n        isBack = firstLayerId === this.props.activePanel;\n      }\n\n      this.blurActiveElement();\n\n      const prevScrolls = this.scrolls[prevProps.activePanel] || [];\n      const scrolls = {\n        ...this.scrolls,\n        [prevProps.activePanel]: [\n          ...prevScrolls,\n          this.props.scroll?.getScroll({ compensateKeyboardHeight: false }).y,\n        ],\n      };\n      this.scrolls = scrolls;\n\n      if (this.shouldDisableTransitionMotion()) {\n        this.flushTransition(prevProps.activePanel, isBack);\n      } else {\n        this.setState({\n          visiblePanels: [prevProps.activePanel, this.props.activePanel],\n          prevPanel: prevProps.activePanel,\n          nextPanel: this.props.activePanel,\n          activePanel: null,\n          animated: true,\n          isBack,\n        });\n      }\n    }\n\n    // Закончилась анимация свайпа назад\n    if (prevProps.activePanel !== this.props.activePanel && prevState.swipingBack) {\n      const nextPanel = this.state.swipeBackNextPanel;\n      const prevPanel = this.state.swipeBackPrevPanel;\n      let scrollPosition: undefined | number = undefined;\n\n      this.scrolls = {\n        ...this.scrolls,\n      };\n\n      if (prevPanel !== null) {\n        const prevPanelScrolls = [...(this.scrolls[prevPanel] || [])].slice(0, -1);\n        this.scrolls[prevPanel] = prevPanelScrolls;\n      }\n      if (nextPanel !== null) {\n        const newPanelScrolls = [...(this.scrolls[nextPanel] || [])];\n        scrollPosition = newPanelScrolls.pop();\n        this.scrolls[nextPanel] = newPanelScrolls;\n      }\n\n      this.setState(\n        {\n          swipeBackPrevPanel: null,\n          swipeBackNextPanel: null,\n          swipingBack: false,\n          swipeBackResult: null,\n          swipeBackStartX: 0,\n          swipeBackShift: 0,\n          activePanel: nextPanel,\n          visiblePanels: [nextPanel],\n        },\n        () => {\n          this.props.scroll?.scrollTo(0, scrollPosition);\n          prevProps.onTransition &&\n            prevProps.onTransition({\n              isBack: true,\n              from: prevPanel,\n              to: nextPanel,\n            });\n        },\n      );\n    }\n\n    // Началась анимация завершения свайпа назад.\n    if (!prevState.swipeBackResult && this.state.swipeBackResult) {\n      this.waitTransitionFinish(\n        this.pickPanel(this.state.swipeBackNextPanel),\n        this.swipingBackTransitionEndHandler,\n      );\n    }\n\n    // Если свайп назад отменился (когда пользователь недостаточно сильно свайпнул)\n    if (\n      prevState.swipeBackResult === 'fail' &&\n      !this.state.swipeBackResult &&\n      this.state.activePanel !== null\n    ) {\n      const newPanelScrolls = [...(this.scrolls[this.state.activePanel] || [])];\n      const scrollPosition = newPanelScrolls.pop();\n      this.scrolls = {\n        ...this.scrolls,\n        [this.state.activePanel]: newPanelScrolls,\n      };\n\n      this.props.scroll?.scrollTo(0, scrollPosition);\n    }\n\n    // Закончился Safari свайп\n    if (prevProps.activePanel !== this.props.activePanel && this.state.browserSwipe) {\n      this.setState({\n        browserSwipe: false,\n        nextPanel: null,\n        prevPanel: null,\n        animated: false,\n        visiblePanels: [this.props.activePanel],\n        activePanel: this.props.activePanel,\n      });\n    }\n  }\n\n  shouldDisableTransitionMotion(): boolean {\n    return (\n      this.props.configProvider?.transitionMotionEnabled === false ||\n      !this.props.splitCol?.animate ||\n      this.props.platform === 'vkcom'\n    );\n  }\n\n  private transitionDisposer = noop;\n\n  private disposeTransition() {\n    this.transitionDisposer();\n    this.transitionDisposer = noop;\n  }\n\n  waitTransitionFinish(\n    elem: HTMLElement | null | undefined,\n    eventHandler: TransitionEventHandler,\n  ): void {\n    if (this.shouldDisableTransitionMotion()) {\n      this.disposeTransition();\n      this.transitionFinishTimeout = setTimeout(eventHandler);\n    } else if (elem) {\n      this.disposeTransition();\n      elem.addEventListener('transitionend', eventHandler);\n      this.transitionDisposer = () => {\n        elem.removeEventListener('transitionend', eventHandler);\n      };\n    } else {\n      if (this.transitionFinishTimeout) {\n        clearTimeout(this.transitionFinishTimeout);\n      }\n      this.transitionFinishTimeout = setTimeout(\n        eventHandler,\n        this.props.platform === 'android' || this.props.platform === 'vkcom' ? 300 : 600,\n      );\n    }\n  }\n\n  blurActiveElement(): void {\n    if (typeof this.window !== 'undefined' && this.document?.activeElement) {\n      (this.document.activeElement as HTMLElement).blur();\n    }\n  }\n\n  pickPanel(id: string | null) {\n    if (id === null) {\n      return undefined;\n    }\n    return this.panelNodes[id];\n  }\n\n  flushTransition(prevPanel: string, isBack: boolean) {\n    const activePanel = this.props.activePanel;\n\n    const prevPanelScrolls = [...(this.scrolls[prevPanel] || [])].slice(0, -1);\n    const newPanelScrolls = [...(this.scrolls[activePanel] || [])];\n    const scrollPosition = isBack ? newPanelScrolls.pop() : 0;\n    if (isBack) {\n      this.scrolls = {\n        ...this.scrolls,\n        [prevPanel]: prevPanelScrolls,\n        [activePanel]: newPanelScrolls,\n      };\n    }\n\n    this.setState(\n      {\n        prevPanel: null,\n        nextPanel: null,\n        visiblePanels: [activePanel],\n        activePanel: activePanel,\n        animated: false,\n        isBack,\n      },\n      () => {\n        this.props.scroll?.scrollTo(0, isBack ? scrollPosition : 0);\n        this.props.onTransition &&\n          this.props.onTransition({ isBack, from: prevPanel, to: activePanel });\n      },\n    );\n  }\n\n  transitionEndHandler = (): void => {\n    if (this.state.prevPanel !== null) {\n      this.flushTransition(this.state.prevPanel, Boolean(this.state.isBack));\n    }\n  };\n\n  swipingBackTransitionEndHandler = (e?: TransitionEvent): void => {\n    // indexOf because of vendor prefixes in old browsers\n    if (\n      !e ||\n      (e.propertyName.includes('transform') &&\n        e.target === this.pickPanel(this.state.swipeBackNextPanel))\n    ) {\n      switch (this.state.swipeBackResult) {\n        case 'fail':\n          this.onSwipeBackCancel();\n          break;\n        case 'success':\n          this.onSwipeBackSuccess();\n      }\n    }\n  };\n\n  onSwipeBackSuccess(): void {\n    this.props.onSwipeBack && this.props.onSwipeBack();\n  }\n\n  onSwipeBackCancel(): void {\n    this.props.onSwipeBackCancel && this.props.onSwipeBackCancel();\n    this.setState({\n      swipeBackPrevPanel: null,\n      swipeBackNextPanel: null,\n      swipingBack: false,\n      swipeBackResult: null,\n      swipeBackStartX: 0,\n      swipeBackShift: 0,\n    });\n  }\n\n  handleTouchMoveXForNativeIOSSwipeBackOrSwipeNext = (event: CustomTouchEvent) => {\n    if (this.state.browserSwipe) {\n      return;\n    }\n    const { swipeBackTriggered, viewportStartEdgeTouched, viewportEndEdgeTouched } =\n      getSwipeBackPredicates(event.startX, event.shiftX, this.window!.innerWidth);\n\n    if ((viewportStartEdgeTouched || viewportEndEdgeTouched) && swipeBackTriggered) {\n      this.setState({ browserSwipe: true });\n    }\n  };\n\n  handleTouchMoveXForIOSSwipeBackSimulation = (event: CustomTouchEvent) => {\n    if (this.swipeBackPrevented || swipeBackExcluded(event)) {\n      return;\n    }\n\n    const { swipedToOpposite, swipeBackTriggered, viewportStartEdgeTouched } =\n      getSwipeBackPredicates(event.startX, event.shiftX, this.window!.innerWidth);\n\n    if (this.state.animated && swipeBackTriggered) {\n      return;\n    }\n\n    if (!this.state.swipingBack && this.props.history && this.props.history.length > 1) {\n      if (swipedToOpposite) {\n        this.swipeBackPrevented = true;\n        return;\n      }\n\n      if (!swipeBackTriggered) {\n        return;\n      }\n\n      if (\n        !viewportStartEdgeTouched &&\n        hasHorizontalScrollableElementWithScrolledToLeft(event.originalEvent.target as HTMLElement)\n      ) {\n        this.swipeBackPrevented = true;\n        return;\n      }\n      // Начался свайп назад\n      if (this.props.onSwipeBackStart) {\n        const payload = this.props.onSwipeBackStart(this.state.activePanel);\n        if (payload === 'prevent') {\n          this.swipeBackPrevented = true;\n          return;\n        }\n      }\n\n      if (this.state.activePanel !== null) {\n        // Note: вызываем закрытие клавиатуры. В iOS это нативное поведение при свайпе.\n        this.blurActiveElement();\n        const prevScrolls = this.scrolls[this.state.activePanel] || [];\n        this.scrolls = {\n          ...this.scrolls,\n          [this.state.activePanel]: [...prevScrolls, this.props.scroll?.getScroll().y],\n        };\n      }\n\n      this.setState({\n        swipingBack: true,\n        swipeBackStartX: event.startX,\n        swipeBackPrevPanel: this.state.activePanel,\n        swipeBackNextPanel: this.props.history.slice(-2)[0],\n      });\n    }\n\n    if (this.state.swipingBack) {\n      if (event.shiftX < 0) {\n        this.setState({ swipeBackShift: 0 });\n      } else if (event.shiftX > this.window!.innerWidth - this.state.swipeBackStartX) {\n        this.setState({ swipeBackShift: this.window!.innerWidth });\n      } else {\n        this.setState({ swipeBackShift: event.shiftX });\n      }\n    }\n  };\n\n  handleTouchEndForIOSSwipeBackSimulation = (event: CustomTouchEvent) => {\n    this.swipeBackPrevented = false;\n\n    if (this.state.swipingBack && this.window) {\n      const speed = (this.state.swipeBackShift / event.duration) * 1000;\n      if (this.state.swipeBackShift === 0) {\n        this.onSwipeBackCancel();\n      } else if (this.state.swipeBackShift >= this.window.innerWidth) {\n        this.onSwipeBackSuccess();\n      } else if (speed > 250 || this.state.swipeBackShift >= this.window.innerWidth / 2) {\n        this.setState({ swipeBackResult: 'success' });\n      } else {\n        this.setState({ swipeBackResult: 'fail' });\n      }\n    }\n  };\n\n  calcPanelSwipeStyles(panelId: string | undefined): React.CSSProperties {\n    if (!canUseDOM || !this.window) {\n      return {};\n    }\n\n    const isPrev = panelId === this.state.swipeBackPrevPanel;\n    const isNext = panelId === this.state.swipeBackNextPanel;\n\n    if ((!isPrev && !isNext) || this.state.swipeBackResult) {\n      return {};\n    }\n\n    let prevPanelTranslate = `${this.state.swipeBackShift}px`;\n    let nextPanelTranslate = `${\n      -50 + (this.state.swipeBackShift * 100) / this.window.innerWidth / 2\n    }%`;\n    let prevPanelShadow =\n      (0.3 * (this.window.innerWidth - this.state.swipeBackShift)) / this.window.innerWidth;\n\n    if (this.state.swipeBackResult) {\n      return isPrev ? { boxShadow: `-2px 0 12px rgba(0, 0, 0, ${prevPanelShadow})` } : {};\n    }\n\n    if (isNext) {\n      return {\n        transform: `translate3d(${nextPanelTranslate}, 0, 0)`,\n      };\n    }\n    if (isPrev) {\n      return {\n        transform: `translate3d(${prevPanelTranslate}, 0, 0)`,\n        boxShadow: `-2px 0 12px rgba(0, 0, 0, ${prevPanelShadow})`,\n      };\n    }\n\n    return {};\n  }\n\n  render() {\n    const {\n      platform,\n      activePanel: _1,\n      splitCol,\n      configProvider,\n      history,\n      id,\n      nav,\n      onTransition,\n      onSwipeBack,\n      onSwipeBackStart,\n      onSwipeBackCancel,\n      window,\n      document,\n      scroll,\n      isBackCheck,\n      className,\n      ...restProps\n    } = this.props;\n    const {\n      prevPanel,\n      nextPanel,\n      activePanel,\n      isBack,\n      animated,\n      swipeBackPrevPanel,\n      swipeBackNextPanel,\n      swipeBackResult,\n      swipingBack,\n    } = this.state;\n\n    const panels = this.panels\n      .filter((panel) => {\n        const panelId = getNavId(panel.props, warn);\n\n        return (\n          (panelId !== undefined && this.state.visiblePanels.includes(panelId)) ||\n          panelId === swipeBackPrevPanel ||\n          panelId === swipeBackNextPanel\n        );\n      })\n      .sort((panel) => {\n        const panelId = getNavId(panel.props, warn);\n        const isPrevPanel = panelId === prevPanel || panelId === swipeBackPrevPanel;\n        const isNextPanel = panelId === nextPanel || panelId === swipeBackNextPanel;\n\n        if (isNextPanel) {\n          return swipingBack || this.state.isBack ? -1 : 1;\n        }\n\n        if (isPrevPanel) {\n          return swipingBack || this.state.isBack ? 1 : -1;\n        }\n\n        return 0;\n      });\n\n    const disableAnimation = this.shouldDisableTransitionMotion();\n    const iOSSwipeBackSimulationEnabled =\n      !disableAnimation && platform === 'ios' && configProvider?.isWebView && Boolean(onSwipeBack);\n\n    return (\n      <NavViewIdContext.Provider value={id || nav}>\n        <Touch\n          Component=\"section\"\n          {...restProps}\n          className={classNames(\n            styles['View'],\n            platform === 'ios' && classNames(styles['View--ios'], 'vkuiInternalView--ios'),\n            !disableAnimation && this.state.animated && styles['View--animated'],\n            !disableAnimation && this.state.swipingBack && styles['View--swiping-back'],\n            disableAnimation && styles['View--no-motion'],\n            className,\n          )}\n          onMoveX={\n            iOSSwipeBackSimulationEnabled\n              ? this.handleTouchMoveXForIOSSwipeBackSimulation\n              : platform === 'ios'\n                ? this.handleTouchMoveXForNativeIOSSwipeBackOrSwipeNext\n                : undefined\n          }\n          onEnd={\n            iOSSwipeBackSimulationEnabled ? this.handleTouchEndForIOSSwipeBackSimulation : undefined\n          }\n        >\n          <div className={styles['View__panels']}>\n            {panels.map((panel: React.ReactElement) => {\n              const panelId = getNavId(panel.props, warn);\n              const isPrev = panelId === prevPanel || panelId === swipeBackPrevPanel;\n              const compensateScroll =\n                isPrev || panelId === swipeBackNextPanel || (panelId === nextPanel && isBack);\n              const isTransitionTarget = animated && panelId === (isBack ? prevPanel : nextPanel);\n              const scrollList = (panelId && this.scrolls[panelId]) || [];\n              const scroll = scrollList[scrollList.length - 1] || 0;\n\n              return (\n                <div\n                  className={classNames(\n                    styles['View__panel'],\n                    panelId === activePanel && styles['View__panel--active'],\n                    panelId === prevPanel && styles['View__panel--prev'],\n                    panelId === nextPanel && styles['View__panel--next'],\n                    panelId === swipeBackPrevPanel && styles['View__panel--swipe-back-prev'],\n                    panelId === swipeBackNextPanel && styles['View__panel--swipe-back-next'],\n                    swipeBackResult === 'success' && styles['View__panel--swipe-back-success'],\n                    swipeBackResult === 'fail' && styles['View__panel--swipe-back-failed'],\n                  )}\n                  onAnimationEnd={isTransitionTarget ? this.transitionEndHandler : undefined}\n                  ref={(el) => panelId !== undefined && (this.panelNodes[panelId] = el)}\n                  style={this.calcPanelSwipeStyles(panelId)}\n                  key={panelId}\n                >\n                  <div\n                    className={styles['View__panel-in']}\n                    style={{ marginTop: compensateScroll ? -scroll : undefined }}\n                  >\n                    <NavTransitionDirectionProvider isBack={swipingBack || isBack}>\n                      <NavTransitionProvider\n                        entering={panelId === nextPanel || panelId === swipeBackNextPanel}\n                      >\n                        {panel}\n                      </NavTransitionProvider>\n                    </NavTransitionDirectionProvider>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </Touch>\n      </NavViewIdContext.Provider>\n    );\n  }\n}\n\nexport const ViewInfinite: React.FC<ViewInfiniteProps> = withContext(\n  withContext(\n    withContext(\n      withPlatform(withDOM<ViewInfiniteProps>(ViewInfiniteComponent)),\n      SplitColContext,\n      'splitCol',\n    ),\n    ConfigProviderContext,\n    'configProvider',\n  ),\n  ScrollContext,\n  'scroll',\n);\n"],"names":["ViewInfinite","scrollsCache","warn","warnOnce","React","ViewInfiniteComponent","Component","document","props","window","panels","Children","toArray","children","componentWillUnmount","id","getNavId","scrolls","animationFinishTimeout","clearTimeout","componentDidUpdate","prevProps","prevState","activePanel","swipingBack","browserSwipe","isBack","isBackCheck","from","to","firstLayerId","map","panel","find","blurActiveElement","prevScrolls","scroll","getScroll","compensateKeyboardHeight","y","shouldDisableTransitionMotion","flushTransition","setState","visiblePanels","prevPanel","nextPanel","animated","state","swipeBackNextPanel","swipeBackPrevPanel","scrollPosition","undefined","prevPanelScrolls","slice","newPanelScrolls","pop","swipeBackResult","swipeBackStartX","swipeBackShift","scrollTo","onTransition","waitTransitionFinish","pickPanel","swipingBackTransitionEndHandler","configProvider","transitionMotionEnabled","splitCol","animate","platform","disposeTransition","transitionDisposer","noop","elem","eventHandler","transitionFinishTimeout","setTimeout","addEventListener","removeEventListener","activeElement","blur","panelNodes","onSwipeBackSuccess","onSwipeBack","onSwipeBackCancel","calcPanelSwipeStyles","panelId","canUseDOM","isPrev","isNext","prevPanelTranslate","nextPanelTranslate","innerWidth","prevPanelShadow","boxShadow","transform","render","_1","history","nav","onSwipeBackStart","className","restProps","filter","includes","sort","isPrevPanel","isNextPanel","disableAnimation","iOSSwipeBackSimulationEnabled","isWebView","Boolean","NavViewIdContext","Provider","value","Touch","classNames","onMoveX","handleTouchMoveXForIOSSwipeBackSimulation","handleTouchMoveXForNativeIOSSwipeBackOrSwipeNext","onEnd","handleTouchEndForIOSSwipeBackSimulation","div","compensateScroll","isTransitionTarget","scrollList","length","onAnimationEnd","transitionEndHandler","ref","el","style","marginTop","NavTransitionDirectionProvider","NavTransitionProvider","entering","constructor","swipeBackPrevented","e","propertyName","target","event","swipeBackTriggered","viewportStartEdgeTouched","viewportEndEdgeTouched","getSwipeBackPredicates","startX","shiftX","swipeBackExcluded","swipedToOpposite","hasHorizontalScrollableElementWithScrolledToLeft","originalEvent","payload","speed","duration","defaultProps","withContext","withPlatform","withDOM","SplitColContext","ConfigProviderContext","ScrollContext"],"mappings":"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"}