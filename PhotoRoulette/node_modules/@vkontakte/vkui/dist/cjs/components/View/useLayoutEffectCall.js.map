{"version":3,"sources":["../../../../src/components/View/useLayoutEffectCall.tsx"],"sourcesContent":["import * as React from 'react';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\n\nclass LayoutEffectCall {\n  #fns: Array<() => void> = [];\n\n  /**\n   * Выполняет переданные функции\n   */\n  run() {\n    for (const fn of this.#fns) {\n      fn();\n    }\n\n    this.#fns = [];\n  }\n\n  /**\n   * Вызовет функцию после изменения DOM, но до того как пользователь увидит\n   * изменения\n   */\n  add = (fn: () => void) => {\n    this.#fns.push(fn);\n  };\n}\n\n/**\n * Возвращает функцию которая вызывает callback после изменения DOM, но до того\n * как пользователь увидит изменения\n */\nexport function useLayoutEffectCall() {\n  const ref = React.useRef<LayoutEffectCall | null>(null);\n  if (!ref.current) {\n    ref.current = new LayoutEffectCall();\n  }\n\n  useIsomorphicLayoutEffect(() => {\n    ref.current!.run();\n  });\n\n  return ref.current.add;\n}\n"],"names":["useLayoutEffectCall","LayoutEffectCall","run","fn","add","push","ref","React","useRef","current","useIsomorphicLayoutEffect"],"mappings":";;;;+BA8BgBA;;;eAAAA;;;;;;;;iEA9BO;2CACmB;IAGxC;AADF,MAAMC;IAGJ;;GAEC,GACDC,MAAM;QACJ,KAAK,MAAMC,iCAAM,IAAI,EAAC,MAAM;YAC1BA;QACF;yCAEK,MAAO,EAAE;IAChB;;QAXA,kCAAA;;mBAA0B,EAAE;;QAa5B;;;GAGC,GACDC,yBAAAA,OAAM,CAACD;YACL,2BAAA,IAAI,EAAC,MAAKE,IAAI,CAACF;QACjB;;AACF;AAMO,SAASH;IACd,MAAMM,MAAMC,OAAMC,MAAM,CAA0B;IAClD,IAAI,CAACF,IAAIG,OAAO,EAAE;QAChBH,IAAIG,OAAO,GAAG,IAAIR;IACpB;IAEAS,IAAAA,oDAAyB,EAAC;QACxBJ,IAAIG,OAAO,CAAEP,GAAG;IAClB;IAEA,OAAOI,IAAIG,OAAO,CAACL,GAAG;AACxB"}