{"version":3,"sources":["../../../../src/components/ModalCardBase/ModalCardBase.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames, hasReactNode } from '@vkontakte/vkjs';\nimport { useAdaptivityWithJSMediaQueries } from '../../hooks/useAdaptivityWithJSMediaQueries';\nimport { useKeyboard } from '../../hooks/useKeyboard';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport type { HTMLAttributesWithRootRef } from '../../types';\nimport { AdaptivityContext } from '../AdaptivityProvider/AdaptivityContext';\nimport { RootComponent } from '../RootComponent/RootComponent';\nimport { Spacing } from '../Spacing/Spacing';\nimport { Subhead } from '../Typography/Subhead/Subhead';\nimport { Title } from '../Typography/Title/Title';\nimport { ModalCardBaseCloseButton } from './ModalCardBaseCloseButton';\nimport styles from './ModalCardBase.module.css';\n\nexport interface ModalCardBaseProps extends HTMLAttributesWithRootRef<HTMLDivElement> {\n  /**\n   * Иконка.\n   *\n   * Может быть компонентом иконки, например, `<Icon56MoneyTransferOutline />`, или `<Avatar size={72} src=\"\" />`\n   */\n  icon?: React.ReactNode;\n\n  /**\n   * Заголовок карточки\n   */\n  header?: React.ReactNode;\n  /* Позволяет поменять тег используемый для заголовка */\n  headerComponent?: React.ElementType;\n\n  /**\n   * Подзаголовок\n   */\n  subheader?: React.ReactNode;\n  /* Позволяет поменять тег используемый для подзаголовка */\n  subheaderComponent?: React.ElementType;\n\n  /**\n   * Кнопки-действия. Принимает [`Button`](https://vkcom.github.io/VKUI/#/Button) с параметрами:\n   *\n   * - `size=\"l\" mode=\"primary\" stretched`\n   * - `size=\"l\" mode=\"secondary\" stretched`\n   *\n   * Для набора кнопок используйте [`ButtonGroup`](https://vkcom.github.io/VKUI/#/ButtonGroup) с параметрами:\n   *\n   * - `gap=\"s\" mode=\"horizontal\" stretched`\n   * - `gap=\"m\" mode=\"vertical\" stretched`\n   */\n  actions?: React.ReactNode;\n\n  onClose?: VoidFunction;\n\n  /**\n   * Текст кнопки закрытия. Делает ее доступной для ассистивных технологий\n   */\n  dismissLabel?: string;\n\n  /**\n   * Задаёт контенту максимальную ширину для десктопной версии.\n   */\n  size?: number;\n\n  /**\n   * `data-testid` для кнопки закрытия\n   */\n  modalDismissButtonTestId?: string;\n  /**\n   * Расположение кнопки закрытия (внутри и вне `popout'a`)\n   *\n   * Доступно только в `compact`-режиме\n   *\n   * На `iOS` в `regular`-режиме всегда включен `inside`\n   *\n   * ⚠️ ВНИМАНИЕ: использование `none` скрывает крестик, это негативно сказывается на пользовательском опыте\n   */\n  dismissButtonMode?: 'inside' | 'outside' | 'none';\n  /**\n   * Позволяет отключить возможность закрытия модальной страницы (смахивание, клавиша `ESC`, клик по подложке)\n   *\n   * ⚠️ ВНИМАНИЕ: использование этой опции негативно сказывается на пользовательском опыте\n   */\n  preventClose?: boolean;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/ModalCardBase\n */\nexport const ModalCardBase = ({\n  icon,\n  header,\n  headerComponent = 'span',\n  subheader,\n  subheaderComponent = 'span',\n  children,\n  actions,\n  onClose,\n  dismissLabel = 'Скрыть',\n  style,\n  size: sizeProp,\n  modalDismissButtonTestId,\n  dismissButtonMode = 'outside',\n  preventClose,\n  ...restProps\n}: ModalCardBaseProps): React.ReactNode => {\n  const platform = usePlatform();\n  const { isDesktop } = useAdaptivityWithJSMediaQueries();\n  const isSoftwareKeyboardOpened = useKeyboard().isOpened;\n\n  const size = isDesktop ? sizeProp : undefined;\n  const withSafeZone =\n    !icon &&\n    (dismissButtonMode === 'inside' ||\n      (platform === 'ios' && !isDesktop && dismissButtonMode !== 'none'));\n\n  const hasHeader = hasReactNode(header);\n  const hasSubheader = hasReactNode(subheader);\n  return (\n    <RootComponent\n      {...restProps}\n      baseClassName={classNames(\n        'vkuiInternalModalCardBase',\n        platform === 'ios' && styles['ModalCardBase--ios'],\n        isDesktop && styles['ModalCardBase--desktop'],\n        withSafeZone && styles['ModalCardBase--withSafeZone'],\n      )}\n      style={{\n        ...style,\n        maxWidth: size,\n      }}\n    >\n      <div\n        className={classNames(\n          styles['ModalCardBase__container'],\n          isSoftwareKeyboardOpened && styles['ModalCardBase__container--softwareKeyboardOpened'],\n        )}\n      >\n        {hasReactNode(icon) && <div className={styles['ModalCardBase__icon']}>{icon}</div>}\n        {hasReactNode(header) && (\n          <Title\n            level=\"2\"\n            weight=\"2\"\n            className={styles['ModalCardBase__header']}\n            Component={headerComponent}\n          >\n            {header}\n          </Title>\n        )}\n        {hasHeader && hasSubheader && <Spacing size={8} />}\n        {hasSubheader && (\n          <AdaptivityContext.Provider value={{ sizeY: 'regular' }}>\n            <Subhead className={styles['ModalCardBase__subheader']} Component={subheaderComponent}>\n              {subheader}\n            </Subhead>\n          </AdaptivityContext.Provider>\n        )}\n\n        {children}\n\n        {hasReactNode(actions) && <div className={styles['ModalCardBase__actions']}>{actions}</div>}\n\n        {dismissButtonMode !== 'none' && (\n          <ModalCardBaseCloseButton\n            testId={modalDismissButtonTestId}\n            onClose={onClose}\n            mode={dismissButtonMode}\n          >\n            {dismissLabel}\n          </ModalCardBaseCloseButton>\n        )}\n      </div>\n    </RootComponent>\n  );\n};\n"],"names":["ModalCardBase","icon","header","headerComponent","subheader","subheaderComponent","children","actions","onClose","dismissLabel","style","size","sizeProp","modalDismissButtonTestId","dismissButtonMode","preventClose","restProps","platform","usePlatform","isDesktop","useAdaptivityWithJSMediaQueries","isSoftwareKeyboardOpened","useKeyboard","isOpened","undefined","withSafeZone","hasHeader","hasReactNode","hasSubheader","RootComponent","baseClassName","classNames","maxWidth","div","className","Title","level","weight","Component","Spacing","AdaptivityContext","Provider","value","sizeY","Subhead","ModalCardBaseCloseButton","testId","mode"],"mappings":";;;;+BAsFaA;;;eAAAA;;;;;;;;iEAtFU;sBACkB;iDACO;6BACpB;6BACA;mCAEM;+BACJ;yBACN;yBACA;uBACF;0CACmB;AA2ElC,MAAMA,gBAAgB;QAAC,EAC5BC,IAAI,EACJC,MAAM,EACNC,kBAAkB,MAAM,EACxBC,SAAS,EACTC,qBAAqB,MAAM,EAC3BC,QAAQ,EACRC,OAAO,EACPC,OAAO,EACPC,eAAe,QAAQ,EACvBC,KAAK,EACLC,MAAMC,QAAQ,EACdC,wBAAwB,EACxBC,oBAAoB,SAAS,EAC7BC,YAAY,EAEO,WADhBC;QAdHf;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAE;QACAC;QACAC;;IAGA,MAAME,WAAWC,IAAAA,wBAAW;IAC5B,MAAM,EAAEC,SAAS,EAAE,GAAGC,IAAAA,gEAA+B;IACrD,MAAMC,2BAA2BC,IAAAA,wBAAW,IAAGC,QAAQ;IAEvD,MAAMZ,OAAOQ,YAAYP,WAAWY;IACpC,MAAMC,eACJ,CAACxB,QACAa,CAAAA,sBAAsB,YACpBG,aAAa,SAAS,CAACE,aAAaL,sBAAsB,MAAM;IAErE,MAAMY,YAAYC,IAAAA,kBAAY,EAACzB;IAC/B,MAAM0B,eAAeD,IAAAA,kBAAY,EAACvB;IAClC,qBACE,qBAACyB,4BAAa,8CACRb;QACJc,eAAeC,IAAAA,gBAAU,EACvB,6BACAd,aAAa,mCACbE,2CACAM;QAEFf,OAAO,4CACFA;YACHsB,UAAUrB;;kBAGZ,cAAA,sBAACsB;YACCC,WAAWH,IAAAA,gBAAU,kCAEnBV;;gBAGDM,IAAAA,kBAAY,EAAC1B,uBAAS,qBAACgC;oBAAIC,SAAS;8BAAkCjC;;gBACtE0B,IAAAA,kBAAY,EAACzB,yBACZ,qBAACiC,YAAK;oBACJC,OAAM;oBACNC,QAAO;oBACPH,SAAS;oBACTI,WAAWnC;8BAEVD;;gBAGJwB,aAAaE,8BAAgB,qBAACW,gBAAO;oBAAC5B,MAAM;;gBAC5CiB,8BACC,qBAACY,oCAAiB,CAACC,QAAQ;oBAACC,OAAO;wBAAEC,OAAO;oBAAU;8BACpD,cAAA,qBAACC,gBAAO;wBAACV,SAAS;wBAAsCI,WAAWjC;kCAChED;;;gBAKNE;gBAEAqB,IAAAA,kBAAY,EAACpB,0BAAY,qBAAC0B;oBAAIC,SAAS;8BAAqC3B;;gBAE5EO,sBAAsB,wBACrB,qBAAC+B,kDAAwB;oBACvBC,QAAQjC;oBACRL,SAASA;oBACTuC,MAAMjC;8BAELL;;;;;AAMb"}