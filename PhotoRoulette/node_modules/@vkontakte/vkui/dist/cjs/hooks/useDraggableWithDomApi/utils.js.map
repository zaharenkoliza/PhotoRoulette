{"version":3,"sources":["../../../../src/hooks/useDraggableWithDomApi/utils.ts"],"sourcesContent":["import type { Direction, DraggingItem, PlaceholderItem, SiblingItem } from './types';\n\nexport const getTargetIsOverOrUnderElData = (\n  clientY: number,\n  elRect: DOMRect,\n): {\n  isUnderEl: boolean;\n  isOverEl: boolean;\n} => {\n  const elRectHalfHeight = elRect.height / 2;\n  return {\n    isUnderEl: clientY <= elRect.bottom - elRectHalfHeight,\n    isOverEl: clientY >= elRect.top + elRectHalfHeight,\n  };\n};\n\nexport const setDraggingItemShiftStyles = (draggingEl: HTMLElement, nextShiftY: number): void => {\n  requestAnimationFrame(() => {\n    draggingEl.style.transform = `translateY(${nextShiftY}px)`;\n  });\n};\n\nexport const setSiblingItemsShiftStyles = (\n  [\n    {\n      el,\n      draggingElRect: { height },\n    },\n    direction,\n  ]: [Omit<SiblingItem, 'shifted'>, Direction],\n  additionalGap = 0,\n): void => {\n  requestAnimationFrame(() => {\n    if (direction === 'up') {\n      el.style.setProperty('transition', 'transform 0.3s ease-in 0s');\n      el.style.removeProperty('transform');\n    } else {\n      el.style.setProperty('transition', 'transform 0.3s ease-out 0s');\n      el.style.setProperty('transform', `translateY(${height + additionalGap}px)`);\n    }\n  });\n};\n\nexport const setInitialDraggingItemStyles = ({ el, draggingElRect }: DraggingItem): void => {\n  const { top, left, width, height } = draggingElRect;\n  requestAnimationFrame(() => {\n    // Inspired by https://github.com/hello-pangea/dnd\n    el.style.setProperty('pointer-events', 'none');\n    el.style.setProperty('position', 'fixed');\n    el.style.setProperty('top', `${top}px`);\n    el.style.setProperty('left', `${left}px`);\n    el.style.setProperty('width', `${width}px`);\n    el.style.setProperty('height', `${height}px`);\n    el.style.setProperty('z-index', 'var(--vkui_internal--z_index_cell_dragging)');\n    el.style.setProperty('box-sizing', 'border-box');\n    el.style.setProperty('transform', 'translateY(0)');\n  });\n};\n\nexport const unsetInitialDraggingItemStyles = ({ el }: DraggingItem): void => {\n  requestAnimationFrame(() => {\n    el.style.removeProperty('pointer-events');\n    el.style.removeProperty('position');\n    el.style.removeProperty('top');\n    el.style.removeProperty('left');\n    el.style.removeProperty('width');\n    el.style.removeProperty('height');\n    el.style.removeProperty('z-index');\n    el.style.removeProperty('box-sizing');\n    el.style.removeProperty('transform');\n  });\n};\n\nexport const setInitialPlaceholderItemStyles = ({ el, draggingElRect }: PlaceholderItem): void => {\n  if (el.firstElementChild) {\n    return;\n  }\n  const { width, height } = draggingElRect;\n  const node = el.cloneNode() as HTMLElement;\n  node.style.setProperty('display', 'block');\n  node.style.setProperty('width', `${width}px`);\n  node.style.setProperty('height', `${height}px`);\n  node.style.setProperty('pointer-events', 'none');\n  el.appendChild(node);\n  el.style.setProperty('display', 'block');\n};\n\nexport const unsetInitialPlaceholderItemStyles = ({ el }: PlaceholderItem): void => {\n  el.style.display = '';\n  el.removeAttribute('style');\n  if (el.firstElementChild) {\n    el.firstElementChild.remove();\n  }\n};\n\nexport const setInitialSiblingItemStyles = (\n  { el, shifted, draggingElRect }: SiblingItem,\n  additionalGap = 0,\n): void => {\n  const { height } = draggingElRect;\n  requestAnimationFrame(() => {\n    el.style.setProperty('pointer-events', 'none');\n    el.style.setProperty('transition', 'none 0s ease 0s');\n\n    if (shifted) {\n      el.style.setProperty('transform', `translateY(${height + additionalGap}px)`);\n    }\n  });\n};\n\nexport const unsetInitialSiblingItemStyles = ({ el }: Omit<SiblingItem, 'shifted'>): void => {\n  requestAnimationFrame(() => {\n    el.style.removeProperty('pointer-events');\n    el.style.removeProperty('transition');\n    el.style.removeProperty('transform');\n  });\n};\n"],"names":["getTargetIsOverOrUnderElData","setDraggingItemShiftStyles","setInitialDraggingItemStyles","setInitialPlaceholderItemStyles","setInitialSiblingItemStyles","setSiblingItemsShiftStyles","unsetInitialDraggingItemStyles","unsetInitialPlaceholderItemStyles","unsetInitialSiblingItemStyles","clientY","elRect","elRectHalfHeight","height","isUnderEl","bottom","isOverEl","top","draggingEl","nextShiftY","requestAnimationFrame","style","transform","el","draggingElRect","direction","additionalGap","setProperty","removeProperty","left","width","firstElementChild","node","cloneNode","appendChild","display","removeAttribute","remove","shifted"],"mappings":"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"}